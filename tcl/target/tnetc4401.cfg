# targets/tnetc4401.cfg

# Texas Instruments (TI) TNETC4401, MIPS32 DOCSIS-tailored SoC (4Kc-based)
# First found TNETC4401PYP on KC-100 CM used in research. Also used on Motorola Surfboard SB5120.
# See https://brezn.muc.ccc.de/~mazzoo/DOCSIS/tnetc4401.pdf
transport select jtag
set _TARGETNAME tnetc4401
set _CPUTAPID 0x0000100f
jtag newtap $_TARGETNAME tap -irlen 5 -ircapture 0x01 -irmask 0x1f -expected-id $_CPUTAPID
target create $_TARGETNAME mips_m4k -chain-position $_TARGETNAME.tap -endian big
# end targets/tnetc4401.cfg

# May need to halt manually before calling reset init
$_TARGETNAME configure -event reset-init {
	#reset_config trst_and_srst separate
	halt
	echo "reset-init: disabling watchdog..."
	mwb phys 0xa8610b00 0 256
	halt
	wait_halt
	echo "Done, check with:"
	echo "targets"	
}

# end targets/tnetc4401.cfg
