#
# OpenOCD Configuration file for ARM PB1176JZF-S
# Author: Linus Walleij <linus.walleij@linaro.org>
#

# 10 MHz
adapter_khz 10000

# Reset configuration
adapter_nsrst_assert_width 100
adapter_nsrst_delay 1000
jtag_ntrst_assert_width 10
jtag_ntrst_delay 10
reset_config trst_and_srst

if { [info exists CHIPNAME] } {
   set _CHIPNAME $CHIPNAME
} else {
   set _CHIPNAME tc1176
}

if { [info exists ENDIAN] } {
   set _ENDIAN $ENDIAN
} else {
   set _ENDIAN little
}

if { [info exists CPUTAPID ] } {
   set _CPUTAPID $CPUTAPID
} else {
   set _CPUTAPID 0x07b76477
}

set _TARGETNAME $_CHIPNAME.cpu

# We have a 5 bit IR register according to
# ARM1176JZF-S Techinical Reference Manual DDI0333H page 14-6
jtag newtap $_CHIPNAME cpu -irlen 5 -ircapture 1 -irmask 0x1f \
     -expected-id $_CPUTAPID -enable

target create $_TARGETNAME arm11 -chain-position $_CHIPNAME.cpu
# OpenOCD ARM11 doesn't support CTI, but when it does, this can be added:
# -ctibase 0x10133000 -ctibase 0x10134000

# 512 kB of on-chip RAM to be used as work area
$_TARGETNAME configure -work-area-phys 0x10300000 -work-area-size 0x80000
